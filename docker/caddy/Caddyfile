# =============================================================================
# OTU — Caddy 리버스 프록시 설정
#
# 도메인 배포 시: 자동 HTTPS (Let's Encrypt)
# 로컬 테스트 시: HTTP (localhost)
#
# 환경변수:
#   DOMAIN       — 앱 도메인 (예: otu.hyoda.kr, 기본: localhost)
#   API_DOMAIN   — API 도메인 (예: api.otu.hyoda.kr, 기본: api.localhost)
# =============================================================================

# ---------------------------------------------------------------
# OTU 앱 (Next.js)
# ---------------------------------------------------------------
{$DOMAIN:localhost} {
	reverse_proxy app:3000
}

# ---------------------------------------------------------------
# Supabase API Gateway (Kong)
# ---------------------------------------------------------------
{$API_DOMAIN:api.localhost} {
	reverse_proxy kong:8000
}
