# =============================================================================
# OTU — Docker 셀프호스팅 환경변수
#
# 사용법:
#   1. 이 파일을 docker/.env 로 복사
#   2. bash docker/generate-keys.sh 로 키 생성
#   3. 아래 값을 채운 후 docker compose --env-file docker/.env up -d
# =============================================================================

# ---------------------------------------------------------------
# 필수: 보안 키 (반드시 변경!)
# docker/generate-keys.sh 로 생성하세요
# ---------------------------------------------------------------
POSTGRES_PASSWORD=your-super-secret-password
JWT_SECRET=your-jwt-secret-at-least-32-characters-long
ANON_KEY=your-generated-anon-key
SERVICE_ROLE_KEY=your-generated-service-role-key

# ---------------------------------------------------------------
# 필수: 도메인 설정
#
# [로컬 테스트]  기본값 그대로 사용 → http://localhost
# [도메인 배포]  두 도메인 모두 같은 서버 IP로 DNS A 레코드 설정 필요
#   예) otu.hyoda.kr     → 서버 IP
#       api.otu.hyoda.kr → 서버 IP
# ---------------------------------------------------------------
# Caddy 리버스 프록시 도메인 (자동 HTTPS)
# 로컬: *.localhost는 브라우저가 자동으로 127.0.0.1로 해석합니다 (RFC 6761)
DOMAIN=localhost
API_DOMAIN=api.localhost

# OTU 앱 URL (브라우저에서 접근하는 URL)
SITE_URL=http://localhost
# Supabase API URL (브라우저에서 Supabase에 접근하는 URL)
API_EXTERNAL_URL=http://api.localhost

# ───── 도메인 배포 예시 ─────
# DOMAIN=otu.hyoda.kr
# API_DOMAIN=api.otu.hyoda.kr
# SITE_URL=https://otu.hyoda.kr
# API_EXTERNAL_URL=https://api.otu.hyoda.kr

# ---------------------------------------------------------------
# 선택: 포트 설정 (기본값 사용 시 변경 불필요)
# ---------------------------------------------------------------
# DB_EXTERNAL_PORT=54322

# ---------------------------------------------------------------
# 선택: AI 기능
# ---------------------------------------------------------------
ENABLE_AI=false
# AI Provider: openai (셀프호스팅 권장) | gateway (Vercel 배포 시)
AI_PROVIDER=openai
# ENABLE_AI=true 시 필수
OPENAI_API_KEY=
# 기본 모델 (AI_PROVIDER=openai 시 사용)
# TEXT_MODEL_NAME=gpt-4o

# ---------------------------------------------------------------
# 선택: 소셜 로그인 (GitHub)
# OAuth Callback URL: https://<API_DOMAIN>/auth/v1/callback
# ---------------------------------------------------------------
ENABLE_GITHUB_AUTH=false
# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=

# ---------------------------------------------------------------
# 선택: 소셜 로그인 (Google)
# OAuth Callback URL: https://<API_DOMAIN>/auth/v1/callback
# ---------------------------------------------------------------
ENABLE_GOOGLE_AUTH=false
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=

# ---------------------------------------------------------------
# 선택: 소셜 로그인 (Apple)
# OAuth Callback URL: https://<API_DOMAIN>/auth/v1/callback
# ---------------------------------------------------------------
ENABLE_APPLE_AUTH=false
# APPLE_CLIENT_ID=
# APPLE_CLIENT_SECRET=

# ---------------------------------------------------------------
# 선택: 이메일 설정 (SMTP)
# 기본값: 이메일 확인 없이 자동 승인 (MAILER_AUTOCONFIRM=true)
# ---------------------------------------------------------------
# MAILER_AUTOCONFIRM=true
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASS=
# SMTP_ADMIN_EMAIL=admin@example.com
# SMTP_SENDER_NAME=OTU

# ---------------------------------------------------------------
# 선택: Uploadcare (이미지 업로드)
# ---------------------------------------------------------------
# NEXT_PUBLIC_UPLOADCARE_PUBLIC_KEY=
# UPLOADCARE_PRIVATE_KEY=

# ---------------------------------------------------------------
# 선택: 회원가입 제한
# ---------------------------------------------------------------
# DISABLE_SIGNUP=false

# ---------------------------------------------------------------
# 선택: 추가 리디렉션 URL
# ---------------------------------------------------------------
# ADDITIONAL_REDIRECT_URLS=
